---
title: Po Instalacji
description: Kroki konfiguracyjne po instalacji CachyOS
---

import { Tabs, TabItem, Steps } from '@astrojs/starlight/components';

## Aktualizacja Systemu

<Tabs>

<TabItem label="Używając Octopi (GUI)">

Octopi to graficzny menedżer pakietów dla dystrybucji opartych na Archu, który zapewnia wygodny sposób zarządzania pakietami i aktualizacjami.
Aby zaktualizować system za pomocą Octopi, wykonaj następujące kroki:

<Steps>

1. Uruchom **Octopi** z menu aplikacji.
2. W głównym oknie kliknij przycisk **Sprawdź aktualizacje** (w lewym górnym rogu), a następnie **Aktualizacja systemu.**
3. Octopi sprawdzi teraz dostępne aktualizacje i zapyta, czy zainstalować je w samym Octopi, czy w terminalu.
4. Aby kontynuować aktualizację, kliknij przycisk **Zastosuj**.
5. Octopi pobierze i zainstaluje aktualizacje.
6. Zaleca się ponowne uruchomienie komputera po dużej aktualizacji **(szczególnie jeśli jądro systemu zostało zaktualizowane)**.

</Steps>

</TabItem>

<TabItem label="Używając Pacmana">

<Steps>

1. Otwórz emulator terminala (lub naciśnij **`ctrl + alt + t`** - **`mod + return`** w menedżerze okien, np. Qtile).
2. Uruchom następujące polecenie, aby zaktualizować system:

   ```sh
   sudo pacman -Syu
   ```
3. Zaleca się ponowne uruchomienie komputera po dużej aktualizacji **(szczególnie jeśli jądro systemu zostało zaktualizowane)**.

</Steps>

</TabItem>

<TabItem label="Aktualizacja Systemu Offline">

*CachyOS wspiera aktualizacje systemu offline za pomocą skryptu [`pacman-offline`](https://github.com/eworm-de/pacman-offline). Pozwala to systemowi pobrać aktualizacje pakietów i zastosować je przy następnym ponownym uruchomieniu. (Tak jak w Windows)*

:::note
Narzędzie `pacman-offline` integruje się z funkcją aktualizacji offline systemd. Automatycznie obsługuje aktualizacje jądra i ładowanie modułów.

Plik `/etc/pacman.d/offline.conf` jest kluczowy do zarządzania, które pakiety są aktualizowane podczas zwykłych i offline'owych aktualizacji. Upewnij się, że jest poprawnie skonfigurowany dla wybranego jądra lub dodaj pakiety, które chcesz aktualizować tylko podczas wykonywania pacman-offline i które mają być ignorowane podczas zwykłej aktualizacji. Przykład: `pacman -Syu`.

**Jeśli włączysz automatyczny timer aktualizacji, nie musisz już ręcznie aktualizować systemu.**
:::

<Steps>

1. **Zainstaluj pakiet pacman-offline**

   ```bash
   sudo pacman -S pacman-offline
   ```

2. **Informowanie Pacmana, aby odczytywał z osobnej listy ignorowanych pakietów.**

   ```bash title='Dodaj następującą linię do pliku /etc/pacman.conf'
   Include = /etc/pacman.d/offline.conf
   ```
   *Przykład*
   ```bash
   # REPOSITORIES
   #   - can be defined here or included from another file
   #   - pacman will search repositories in the order defined here
   #   - local/custom mirrors can be added here or in separate files
   #   - repositories listed first will take precedence when packages
   #     have identical names, regardless of version number
   #   - URLs will have $repo replaced by the name of the current repo
   #   - URLs will have $arch replaced by the name of the architecture
   #
   # Repository entries are of the format:
   #       [repo-name]
   #       Server = ServerName
   #       Include = IncludePath
   #
   # The header [repo-name] is crucial - it must be present and
   # uncommented to enable the repo.
   #

   Include = /etc/pacman.d/offline.conf
   ```
3. **Dodawanie jąder CachyOS, aby pacman ignorował je podczas zwykłych aktualizacji**

   Narzędzie `pacman-offline` używa tego pliku do określenia, które pakiety ignorować podczas tradycyjnych aktualizacji pacman.

   **Przykład: gdy uruchamiasz `sudo pacman -Syu`**

   *Zastąp zawartość pliku `/etc/pacman.d/offline.conf` następującą treścią:*

   ```text
   # Arch Linux kernels
   IgnorePkg = linux linux-headers linux-docs
   IgnorePkg = linux-lts linux-lts-headers linux-lts-docs
   IgnorePkg = linux-zen linux-zen-headers linux-zen-docs
   IgnorePkg = linux-hardened linux-hardened-headers linux-hardened-docs

   # CachyOS kernels
   IgnorePkg = linux-cachyos linux-cachyos-headers
   IgnorePkg = linux-cachyos-bmq linux-cachyos-bmq-headers
   IgnorePkg = linux-cachyos-bore linux-cachyos-bore-headers
   IgnorePkg = linux-cachyos-deckify linux-cachyos-deckify-headers
   IgnorePkg = linux-cachyos-eevdf linux-cachyos-eevdf-headers
   IgnorePkg = linux-cachyos-gcc linux-cachyos-gcc-headers
   IgnorePkg = linux-cachyos-hardened linux-cachyos-hardened-headers
   IgnorePkg = linux-cachyos-lts linux-cachyos-lts-headers
   IgnorePkg = linux-cachyos-rc linux-cachyos-rc-headers
   IgnorePkg = linux-cachyos-rt-bore linux-cachyos-rt-bore-headers
   IgnorePkg = linux-cachyos-sched-ext linux-cachyos-sched-ext-headers
   IgnorePkg = linux-cachyos-server linux-cachyos-server-headers
   IgnorePkg = linux-cachyos-lto linux-cachyos-lto-headers
   IgnorePkg = linux-cachyos-bmq-lto linux-cachyos-bmq-lto-headers
   IgnorePkg = linux-cachyos-bore-lto linux-cachyos-bore-lto-headers
   IgnorePkg = linux-cachyos-deckify-lto linux-cachyos-deckify-lto-headers
   IgnorePkg = linux-cachyos-eevdf-lto linux-cachyos-eevdf-lto-headers
   IgnorePkg = linux-cachyos-gcc-lto linux-cachyos-gcc-lto-headers
   IgnorePkg = linux-cachyos-hardened-lto linux-cachyos-hardened-lto-headers
   IgnorePkg = linux-cachyos-lts-lto linux-cachyos-lts-lto-headers
   IgnorePkg = linux-cachyos-rc-lto linux-cachyos-rc-lto-headers
   IgnorePkg = linux-cachyos-rt-bore-lto linux-cachyos-rt-bore-lto-headers
   IgnorePkg = linux-cachyos-sched-ext-lto linux-cachyos-sched-ext-lto-headers
   IgnorePkg = linux-cachyos-server-lto linux-cachyos-server-lto-headers
   ```

   *Teraz wszystkie te pakiety będą ignorowane podczas zwykłych aktualizacji, ale sprawdzane podczas przygotowania offline.*

3. **Uruchom przygotowanie do aktualizacji offline tylko raz**

   ```bash title='Uruchom następujące polecenie'
   sudo systemctl start pacman-offline-prepare.service
   ```
   To polecenie spowoduje jednorazowe uruchomienie pacman-offline, zsynchronizowanie baz danych pakietów i pobranie aktualizacji, ale bez ich instalowania.

</Steps>

*Jeśli chcesz zautomatyzować ten skrypt, wykonaj następujące kroki:*

<Steps>

1. **Włącz timer przygotowania**

   Włączenie `pacman-offline-prepare.timer` pozwoli systemd na codzienne uruchamianie tego skryptu w celu pobrania aktualizacji kilka minut po każdym uruchomieniu systemu.

   ```bash
   sudo systemctl enable pacman-offline-prepare.timer
   ```

2. **Uruchom ponownie system:**

   Aktualizacje zostaną zainstalowane podczas następnego ponownego uruchomienia systemu.

3. **(Opcjonalnie) Automatyczne Ponowne Uruchamianie Systemu:**

    Włącz `pacman-offline-reboot.timer`, aby automatycznie ponownie uruchamiać system domyślnie o **3:00** (Twoja strefa czasowa), jeśli oczekują aktualizacje. Pamiętaj, że nie zawsze będzie to dokładnie o tej samej porze z powodu uwzględnienia `RandomizedDelaySec`, które domyślnie ustawione jest na 2 godziny.

    ```bash
    sudo systemctl enable pacman-offline-reboot.timer
    ```

    :::tip
    Możesz edytować plik `pacman-offline-reboot.timer`, aby zmodyfikować godzinę ponownego uruchomienia systemu w przypadku oczekujących aktualizacji lub wyłączyć losowy harmonogram.
    :::

</Steps>

</TabItem>

</Tabs>

## Konfiguracja Zapory Sieciowej (ufw)
:::note
UFW jest domyślnie włączone po instalacji.
:::
Aby skonfigurować ufw, wykonaj następujące kroki:

<Tabs>

<TabItem label="Włącz">

```bash
sudo ufw enable
```

</TabItem>

<TabItem label="Wyłącz">

```bash
sudo ufw disable
```

</TabItem>

<TabItem label="Zezwól">

Domyślnie ufw zezwala na cały ruch przychodzący i wychodzący, możesz dodać konkretne reguły do zapory, aby blokować lub zezwalać na określone połączenia.

```bash
# Na przykład:
sudo ufw allow ssh
```

</TabItem>

<TabItem label="Odmów">

```bash
# Aby odmówić dostępu do określonego portu, sprawdź poniższy przykład:
sudo ufw deny 80
```

</TabItem>

<TabItem label="Status">

```bash
sudo ufw status verbose
```

</TabItem>

</Tabs>

:::note
Zachowaj ostrożność podczas konfigurowania reguł zapory, ponieważ nieprawidłowo skonfigurowane reguły mogą zablokować dostęp do Twojego systemu.
:::

:::note
Możesz również skonfigurować ją graficznie, używając sekcji "Zapora sieciowa" w ustawieniach KDE Plasma.
:::

## Włączanie Globalnego Menu
W przypadku niektórych aplikacji, takich jak Visual Studio Code, globalne menu może nie działać lub być dołączone do aplikacji nadrzędnej zamiast do panelu.

```sh
# Aby włączyć obsługę globalnego menu, uruchom polecenie i ponownie uruchom aplikację.
sudo pacman -S appmenu-gtk-module libdbusmenu-glib
```

## Włączanie obsługi AppArmor przy użyciu profili AppArmor.d (Opcjonalne)

<Steps>

1. Dodaj następujące parametry jądra do swojego Menedżera Rozruchu, zobacz [Konfiguracja Menedżera Rozruchu](/pl/configuration/boot_manager_configuration) jako odniesienie

   ```text
   lsm=landlock,lockdown,yama,integrity,apparmor,bpf
   ```

2. Zainstaluj pakiety apparmor i apparmor.d-git **(Zestaw ponad 1500 profili)**
   ```bash
   sudo pacman -S apparmor apparmor.d-git
   ```

3. Włącz/Uruchom usługę AppArmor

   ```bash
   systemctl enable --now apparmor.service
   ```

4. Włącz buforowanie dla profili AppArmor

   ```shell
   # /etc/apparmor/parser.conf
   ## Dodaj następujące linie:
   write-cache
   Optimize=compress-fast
   ```
   Zapisz plik i uruchom ponownie system.
</Steps>

## Zmiana Domyślnej Powłoki

Obecnie CachyOS używa [fish](https://fishshell.com/) jako domyślnej powłoki logowania użytkownika. Możesz jednak zmienić domyślną powłokę na dowolną inną.

<Tabs>
   <TabItem label='bash'>

      Jest to domyślna powłoka w prawie każdej dystrybucji Linuksa. Jest również nadal używana jako powłoka logowania użytkownika root. bash posiada podstawową funkcjonalność autouzupełniania i łatwe zarządzanie historią. Różni się od zsh i fish tym, że nie ma rozbudowanego ekosystemu dostosowywania i wtyczek, które posiadają zarówno fish, jak i zsh.

      ```sh title='Zmiana domyślnej powłoki na bash'
      ❯ chsh -s /usr/bin/bash
      ```

   </TabItem>

   <TabItem label='zsh'>

      Dostarczamy [konfigurację zsh](https://github.com/CachyOS/cachyos-zsh-config) z często używanymi wtyczkami i konfiguracjami. Ma ona na celu zapewnienie funkcjonalności 1:1 z naszą [konfiguracją fish](https://github.com/CachyOS/cachyos-fish-config). Jest to również domyślna powłoka używana w MacOS.

      ```sh title='Zmiana domyślnej powłoki na zsh'
      ❯ chsh -s /usr/bin/zsh
      ```

   </TabItem>
</Tabs>

## Aktualizacja/używanie [tldr](https://github.com/tldr-pages/tldr)

:::note
CachyOS używa [tealdeer](https://github.com/tealdeer-rs/tealdeer), które jest szybszą implementacją oryginalnego tldr opartą na Rust
:::

To narzędzie jest niezwykle przydatne dla tych, którzy nie chcą dużo czytać lub tracić czasu na czytanie stron pomocy/man.

<Steps>

1. ```sh title="Otwórz terminal i uruchom następujące polecenie"
   tldr --update         
   ```
2. Przykład użycia tldr:
   ```sh
   tldr java
     Execute a `.jar` program:

      java -jar filename.jar
   
   # Jak widać, jest to naprawdę przydatne, a nowe narzędzia/strony są dodawane z czasem
   ```

</Steps>
