---
title: Настройки CachyOS
---
import { Tabs, TabItem, Steps } from '@astrojs/starlight/components';


Вместе с нашими оптимизированными ядрами и репозиториями мы также предоставляем настройки, которые дополнительно улучшают работу с рабочим столом.
Мы также включаем несколько вспомогательных скриптов для улучшения качества жизни. Все эти конфигурации и скрипты находятся в пакете `cachyos-settings`.

## Твики sysctl

Мы предоставляем множество твиков sysctl, направленных на улучшение общей производительности рабочего стола. Каждая запись sysctl хорошо документирована
в файле [`99-cachyos-settings.conf`](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/sysctl.d/99-cachyos-settings.conf)

Чтобы внести изменения в любое из этих значений, скопируйте исходную запись и создайте новый файл в `/etc/sysctl.d/` для измененного значения.

### Изменение значений sysctl

<Steps>

1. Посмотрите на исходное значение из `cachyos-settings`

    ```sh
    ❯ cat /usr/lib/sysctl.d/99-cachyos-settings.conf
    # Только экспериментально!
    # Пусть задачи реального времени выполняются столько, сколько им нужно
    # sched: RT throttling activated
    kernel.sched_rt_runtime_us=-1
    ```

2. Создайте новый файл в `/etc/sysctl.d`, чтобы внести изменения в настройки sysctl

    ```sh title="Возврат kernel.sched_rt_runtime_us= к значению по умолчанию"
    ❯ sudo micro /etc/sysctl.d/99-kernel-sched-rt.conf # Если файл не существует, эта команда создает его и позволяет редактировать
    kernel.sched_rt_runtime_us=950000
    ```

</Steps>

## Правила udev

- [Правила ZRAM](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/udev/rules.d/30-zram.rules) - Устанавливает swappiness ZRAM на более агрессивное
значение, чтобы кэш с большей вероятностью переходил в ZRAM
- [Разрешения HPET](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/udev/rules.d/40-hpet-permissions.rules) - Разрешает доступ к узлам устройств `rtc0`
и `hpet` для аудиогруппы.
- [Управление питанием SATA](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/udev/rules.d/50-sata.rules) - Устанавливает политику управления питанием устройств SATA на `max_performance`
- [Правила планировщика ввода-вывода](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/udev/rules.d/60-ioschedulers.rules) - Выбирает оптимальный планировщик для каждого типа диска (HDD, SSD, NVMe)
- [Правила hdparm](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/udev/rules.d/69-hdparm.rules) - Устанавливает для SATA и IDE HDD максимальную производительность
- [NVIDIA RTD3](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/udev/rules.d/71-nvidia.rules) - Настраивает функцию динамического управления питанием для поколения Turing GPU. **RTD3 не работает должным образом на Turing GPU с открытыми модулями**
- [Задержка CPU DMA](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/udev/rules.d/99-cpu-dma-latency.rules) -
Разрешает доступ к узлу устройства `cpu_dma_latency` для аудиогруппы.

## Параметры modprobe

- Принудительно использует драйвер AMDGPU на Southern Islands (GCN 1.0) и Sea Islands (GCN 2.0)
- Включает [различные твики](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/modprobe.d/nvidia.conf) для NVIDIA
- Вносит в черный список модули watchdog

## Вспомогательные скрипты

- **`amdpstate-guided`** - Устанавливает драйвер масштабирования `amd-pstate` на `guided` и переключает регулятор ЦП на `schedutil`
- **`cachyos-bugreport.sh`** - Собирает различные журналы из `inxi`, `dmesg` и `journalctl` для помощи в устранении неполадок
- **`game-performance`** - Скрипт-обертка для `powerprofilesctl` для переключения на профиль производительности по требованию.
См. [Переключение профиля питания по требованию](/ru/configuration/gaming#переключение-профиля-питания-по-требованию)
- **`kerver`** - Скрипт QoL для отображения информации о текущем ядре
- **`paste-cachyos`** - Скрипт для вставки вывода терминала для текстовых файлов из системы

    <Tabs>
        <TabItem label="Загрузка текстовых файлов">
            ```sh
            ❯ paste-cachyos /path/to/file
            ```
        </TabItem>
        <TabItem label="Загрузка вывода терминала">
            ```sh
            ❯ <command> | paste-cachyos
            ```
        </TabItem>
    </Tabs>
- [`pci-latency`](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/bin/pci-latency)
    ```sh title="Включение pci-latency в масштабе всей системы"
    ❯ sudo systemctl enable --now pci-latency.service
    ```
- **`sbctl-batch-sign`** - Вспомогательный скрипт для простой подписи образов ядра и двоичных файлов EFI для безопасной загрузки и сохранения их в базе данных sbctl
- **`topmem`** - Показывает статистику RAM, swap и ksm для 10 процессов в порядке убывания.


## Другие конфигурации

### Твики использования памяти

- Конфигурация THP Shrinker (max_ptes_none = 409)
- Установите максимальный размер 50 МБ для журнала systemd
- [ZRAM Generator](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/systemd/zram-generator.conf) - Устанавливает для ZRAM тот же размер, что и для RAM, и использует ZSTD для сжатия

### Правила Ananicy-cpp

- [ananicy-cpp](https://gitlab.com/ananicy-cpp/ananicy-cpp) с [поддерживаемыми сообществом наборами правил](https://github.com/CachyOS/ananicy-rules)

### Сетевые модификации

- [systemd-resolved в качестве DNS-резолвера по умолчанию](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/lib/NetworkManager/conf.d/dns.conf) для NetworkManager

### RTC

- Увеличьте самую высокую запрошенную частоту прерываний RTC до **3072**

### NTP QoL

- Предпочтительный сервер установлен на **Cloudflare**
- Резервные серверы > **Google и Arch Linux**

### Твики служб systemd

- Время ожидания для запуска службы/юнита установлено на **15 с**
- Время ожидания для остановки службы/юнита установлено на **10 с**
- Мягкий лимит для открытых файловых дескрипторов установлен на **2048**
- Жесткий лимит для открытых файловых дескрипторов установлен на **2097152**

### X.Org

- Включите [Tap to Click](https://github.com/CachyOS/CachyOS-Settings/blob/master/usr/share/X11/xorg.conf.d/20-touchpad.conf) по умолчанию для всех сеансов X11
