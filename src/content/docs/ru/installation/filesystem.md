---
title: Файловые системы
description: Описание и рекомендации для доступных файловых систем (ext4, f2fs, btrfs, xfs, zfs, bcachefs).
---

CachyOS предлагает 5 файловых систем, чтобы пользователь мог выбрать то, что лучше всего соответствует его потребностям. Ниже будут рассмотрены преимущества, недостатки и рекомендации для каждой файловой системы. Каждая файловая система поставляется со своими требованиями/утилитами, предустановленными в CachyOS.

:::note
BTRFS является файловой системой по умолчанию и рекомендуется для CachyOS. Выбирайте ее, если не уверены.
:::

## XFS
XFS — это журналируемая файловая система, созданная и разработанная компанией Silicon Graphics, Inc. Она была создана в 1993 году, портирована на Linux в 2001 году и в настоящее время широко поддерживается большинством дистрибутивов Linux.
### Плюсы
- Быстрая, XFS изначально разрабатывалась с учетом скорости и экстремальной масштабируемости.
- Надежная, XFS использует несколько технологий для предотвращения повреждения данных.
- Устойчива к фрагментации благодаря своей экстентной природе и стратегии отложенного выделения.
### Минусы
- Не может быть уменьшена.

### Пользовательская утилита
Пакет, содержащий пользовательские инструменты для управления файловыми системами XFS, — `xfsprogs`.

### Рекомендация:
XFS — рекомендуемая файловая система для пользователей, которым не нужны расширенные функции и которые просто хотят быструю и надежную файловую систему.

## BTRFS
BTRFS — это современная файловая система с копированием при записи (COW), созданная в 2007 году и объявленная стабильной в ядре Linux в 2013 году. Она широко поддерживается и в основном известна своим расширенным набором функций.
### Плюсы
- Прозрачное сжатие. BTRFS поддерживает прозрачное сжатие файлов, что позволяет значительно экономить место без вмешательства пользователя. CachyOS поставляется со сжатием ZSTD, установленным по умолчанию на уровень 3.
- Функциональность снимков. BTRFS использует свою COW-природу, чтобы позволить создавать снимки подтомов, которые занимают очень мало фактического места.
- Функциональность подтомов, обеспечивающая больший контроль над файловой системой.
- Возможность увеличения или уменьшения.
- Очень быстрая разработка.
### Минусы
- Иногда требуется дефрагментация или балансировка.
- Хуже работает на вращающихся дисках из-за вышеупомянутой фрагментации.
### Пользовательская утилита
Пакет пользовательских утилит Btrfs — `btrfs-progs`.

### Структура подтомов
CachyOS предоставляет структуру подтомов из коробки, чтобы обеспечить простую функциональность снимков.
- Подтом @ = /
- Подтом @home = /home
- Подтом @root = /root
- Подтом @srv = /srv
- Подтом @cache = /var/cache
- Подтом @tmp = /var/tmp
- Подтом @log = /var/log

### Рекомендация:
BTRFS рекомендуется для пользователей, которым нужна функциональность снимков/резервного копирования и прозрачное сжатие.

## EXT4
EXT4 (четвертая расширенная файловая система) — наиболее часто используемая файловая система Linux. EXT4 была сделана стабильной в ядре Linux в 2008 году.
### Плюсы
- Очень распространена, что обеспечивает легкий доступ к большому количеству ресурсов.
- Надежная. EXT4 имеет проверенную репутацию очень надежной файловой системы.
- Возможность увеличения или уменьшения.
### Минусы
- Построена на старой кодовой базе.
- Не хватает многих расширенных функций, которые предлагают другие файловые системы.

### Пользовательские утилиты
Пакет для управления ext4 — `e2fsprogs`.

### Рекомендация:
EXT4 рекомендуется для пользователей, которым нужна самая простая и наиболее часто используемая файловая система.

## ZFS

ZFS — это продвинутая файловая система, первоначально разработанная Sun Microsystems в 2005 году. ZFS имеет много функций, однако она лицензирована по лицензии CDDL, что означает, что она не может быть включена в ядро Linux и требует установки отдельного модуля.

:::caution
Не используйте ядро реального времени вместе с ZFS, потому что оно несовместимо из-за проблем с лицензированием.
:::

### Плюсы
- Объединенное хранилище (zpool)
- Снимки с использованием COW
- Сжатие
- Поддержка Raid-Z
- ARC-кэш позволяет невероятно быстро считывать часто используемые файлы.
### Минусы
- Очень сложна в использовании и понимании из-за таких функций, как zpool и ARC.
- ARC требует много оперативной памяти, чтобы быть эффективным.
- Не включена в ядро Linux, поэтому зависит от стороннего модуля ядра (OpenZFS)
- Несовместима с вытеснением в реальном времени

### Необходимые инструменты
'ZFS-Module' CachyOS предоставляет предварительно скомпилированный модуль zfs для каждой версии ядра.
`zfs-utils` для пользовательских утилит.

### Рекомендация:
ZFS следует использовать только продвинутым пользователям, которым нужны расширенные функции ZFS, такие как объединенное хранилище или ARC-кэш.

## F2FS
F2FS или Flash-Friendly File System — это файловая система для флэш-памяти, созданная и разработанная компанией Samsung специально для ядра Linux. F2FS была создана специально для NAND-флэш-памяти, используемой в современных хранилищах.
### Плюсы
- Разработана с учетом удобства для флэш-памяти.
- Прозрачное сжатие, используемое для уменьшения количества записей на диск (экономия места в настоящее время недоступна для пользователя)
- Быстрее, чем другие файловые системы, такие как EXT4.
- Лучшее выравнивание износа, что еще больше продлевает срок службы NAND-флэш-памяти.
### Минусы
- Не может быть уменьшена.
- Экономия места за счет сжатия в настоящее время не может быть использована пользователем. Это может быть добавлено в будущем.
- Относительно слабая fsck (проверка файловой системы)
- Переход на ядро более старой версии, чем версия, в которой была создана файловая система, может вызвать проблемы.

### Пользовательские утилиты
Основная утилита для f2fs — `f2fs-tools`.

### Рекомендация:
F2FS рекомендуется только пользователям, которые хотят максимально продлить срок службы своей NAND-флэш-памяти.

## BcacheFS
Bcachefs — это новая продвинутая файловая система для Linux, с акцентом на надежность и устойчивость, а также полный набор функций, которые можно ожидать от современной файловой системы.

:::caution[ВНИМАНИЕ]
Bcachefs все еще считается экспериментальной и может иметь проблемы.
:::

### Плюсы
- Копирование при записи (CoW) — как BTRFS или ZFS
- Сжатие
- Кэширование, размещение данных
- Репликация
- Масштабируемость
### Минусы
- Экспериментальная
- Настройка может быть сложной

## TL:DR
Используйте файловую систему по умолчанию **BTRFS**, так как она считается стабильной и имеет много интересных функций (снимки, сжатие и т. д.). Используйте **XFS** или **EXT4** для простой
и быстрой файловой системы.
